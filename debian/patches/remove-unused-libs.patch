Subject: Remove unused library links: libcurl, sqlite3, libxmmsclient, mpd
Author: James Lu <bitflip3@gmail.com>
Forwarded: no
Last-Update: 2017-02-06

Index: osdlyrics/configure.ac
===================================================================
--- osdlyrics.orig/configure.ac	2017-02-06 16:38:27.842150576 -0800
+++ osdlyrics/configure.ac	2017-02-06 16:49:46.555496049 -0800
@@ -110,29 +110,10 @@
                           gio-unix-2.0])
 PKG_CHECK_MODULES([X11], [x11])   dnl For XGrabKey
 PKG_CHECK_MODULES([DBUS_GLIB], [dbus-glib-1])
-PKG_CHECK_MODULES([CURL], [libcurl])
 PKG_CHECK_MODULES([NOTIFY], [libnotify])
 PKG_CHECK_EXISTS([libnotify >= 0.7],
   AC_DEFINE(HAVE_LIBNOTIFY_0_7, 1, [Have libnotify >= 0.7]))
 
-PKG_CHECK_MODULES([SQLITE], [sqlite3 >= 3.3.0])
-
-dnl MPD support
-AC_ARG_ENABLE([mpd],
-  [AS_HELP_STRING([--disable-mpd], [Disables MPD support. You won't need libmpd if you use this option])],
-  [],
-  [enable_mpd=yes])
-AM_CONDITIONAL(BUILD_MPD_SUPPORT, test "x$enable_mpd" = xyes)
-
-dnl XMMS2 support
-AC_ARG_ENABLE([xmms2],
-  [AS_HELP_STRING([--disable-xmms2], [Disables XMMS2 support. You won't need libxmmsclient if you use this option])],
-  [],
-  [enable_xmms2=yes])
-XMMS2_CFLAGS=
-XMMS2_LIBS=
-AM_CONDITIONAL(BUILD_XMMS2_SUPPORT, [test "x$enable_xmms2" = xyes])
-
 dnl AppIndicator support for Ubuntu
 if test x$enable_appindicator = xauto ; then
         PKG_CHECK_EXISTS([appindicator-0.1 >= $APPINDICATOR_REQUIRED],
@@ -192,16 +173,6 @@
 AC_MSG_NOTICE([OSD Lyrics compilation options:])
         AC_MSG_NOTICE([ *        Version: $PACKAGE_VERSION])
         AC_MSG_NOTICE([ *         Prefix: $prefix])
-if test "x$enable_mpd" = "xyes"; then
-        AC_MSG_NOTICE([ *    MPD support: yes])
-else
-        AC_MSG_NOTICE([ *    MPD support: no])
-fi
-if test "x$enable_xmms2" = "xyes"; then
-        AC_MSG_NOTICE([ *  XMMS2 support: yes])
-else
-        AC_MSG_NOTICE([ *  XMMS2 support: no])
-fi
 if test "x$enable_appindicator" = "xyes"; then
         AC_MSG_NOTICE([ *   AppIndicator: yes])
 else
Index: osdlyrics/players/Makefile.am
===================================================================
--- osdlyrics.orig/players/Makefile.am	2017-02-06 16:49:26.055903050 -0800
+++ osdlyrics/players/Makefile.am	2017-02-06 16:49:47.663474021 -0800
@@ -2,7 +2,5 @@
         mpris1 \
         mpris2 \
         http \
+        mpd \
         $(NULL)
-if BUILD_MPD_SUPPORT
-        SUBDIRS += mpd
-endif
Index: osdlyrics/src/Makefile.am
===================================================================
--- osdlyrics.orig/src/Makefile.am	2017-02-06 16:38:27.854150303 -0800
+++ osdlyrics/src/Makefile.am	2017-02-06 16:51:11.917790642 -0800
@@ -6,9 +6,7 @@
 AM_CPPFLAGS = \
 	@GTK2_CFLAGS@ \
 	@DBUS_GLIB_CFLAGS@ \
-	@CURL_CFLAGS@ \
 	@NOTIFY_CFLAGS@ \
-	@SQLITE_CFLAGS@ \
 	@X11_CFLAGS@ \
 	@APP_INDICATOR_CFLAGS@ \
 	-DDATADIR='"$(datadir)"' \
@@ -17,9 +15,7 @@
 LDADD = \
 	@GTK2_LIBS@ \
 	@DBUS_GLIB_LIBS@ \
-	@CURL_LIBS@ \
 	@NOTIFY_LIBS@ \
-	@SQLITE_LIBS@ \
 	@X11_LIBS@ \
 	@APP_INDICATOR_LIBS@ \
 	-lm \
Index: osdlyrics/src/tests/Makefile.am
===================================================================
--- osdlyrics.orig/src/tests/Makefile.am	2017-02-06 16:38:27.866150032 -0800
+++ osdlyrics/src/tests/Makefile.am	2017-02-06 16:52:17.428471451 -0800
@@ -19,7 +19,6 @@
 	-DGUIDIR='"$(OL_GUIDIR)"' \
 	@GTK2_CFLAGS@ \
 	@DBUS_GLIB_CFLAGS@ \
-	@SQLITE_CFLAGS@ \
 	-I$(top_srcdir)/src \
 	-I$(top_srcdir)/src/tests \
 	$(NULL)
@@ -31,8 +30,6 @@
 LDADD = \
 	@GTK2_LIBS@ \
 	@DBUS_GLIB_LIBS@ \
-	@CURL_LIBS@ \
-	@SQLITE_LIBS@ \
 	-lm \
 	$(NULL)
